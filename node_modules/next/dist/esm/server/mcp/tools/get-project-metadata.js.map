{"version":3,"sources":["../../../../src/server/mcp/tools/get-project-metadata.ts"],"sourcesContent":["import type { McpServer } from 'next/dist/compiled/@modelcontextprotocol/sdk/server/mcp'\n\nexport function registerGetProjectMetadataTool(\n  server: McpServer,\n  projectPath: string,\n  getDevServerUrl: () => string | undefined\n) {\n  server.registerTool(\n    'get_project_metadata',\n    {\n      description:\n        'Returns the the metadata of this Next.js project, including project path, dev server URL, etc.',\n      inputSchema: {},\n    },\n    async (_request) => {\n      try {\n        if (!projectPath) {\n          return {\n            content: [\n              {\n                type: 'text',\n                text: 'Unable to determine the absolute path of the Next.js project.',\n              },\n            ],\n          }\n        }\n\n        const devServerUrl = getDevServerUrl()\n\n        return {\n          content: [\n            {\n              type: 'text',\n              text: JSON.stringify({\n                projectPath,\n                devServerUrl,\n              }),\n            },\n          ],\n        }\n      } catch (error) {\n        return {\n          content: [\n            {\n              type: 'text',\n              text: `Error: ${error instanceof Error ? error.message : String(error)}`,\n            },\n          ],\n        }\n      }\n    }\n  )\n}\n"],"names":["registerGetProjectMetadataTool","server","projectPath","getDevServerUrl","registerTool","description","inputSchema","_request","content","type","text","devServerUrl","JSON","stringify","error","Error","message","String"],"mappings":"AAEA,OAAO,SAASA,+BACdC,MAAiB,EACjBC,WAAmB,EACnBC,eAAyC;IAEzCF,OAAOG,YAAY,CACjB,wBACA;QACEC,aACE;QACFC,aAAa,CAAC;IAChB,GACA,OAAOC;QACL,IAAI;YACF,IAAI,CAACL,aAAa;gBAChB,OAAO;oBACLM,SAAS;wBACP;4BACEC,MAAM;4BACNC,MAAM;wBACR;qBACD;gBACH;YACF;YAEA,MAAMC,eAAeR;YAErB,OAAO;gBACLK,SAAS;oBACP;wBACEC,MAAM;wBACNC,MAAME,KAAKC,SAAS,CAAC;4BACnBX;4BACAS;wBACF;oBACF;iBACD;YACH;QACF,EAAE,OAAOG,OAAO;YACd,OAAO;gBACLN,SAAS;oBACP;wBACEC,MAAM;wBACNC,MAAM,CAAC,OAAO,EAAEI,iBAAiBC,QAAQD,MAAME,OAAO,GAAGC,OAAOH,QAAQ;oBAC1E;iBACD;YACH;QACF;IACF;AAEJ","ignoreList":[0]}